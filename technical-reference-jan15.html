<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ali Technical Reference | Settings & Personalization</title>
  <style>
    :root {
      --bg-page: #F5F3F0;
      --bg-card: #FFFFFF;
      --text-primary: #1a1a1a;
      --text-secondary: #555555;
      --text-muted: #888888;
      --border-light: #e5e5e5;
      --accent: #4A7BA7;
      --accent-light: rgba(74, 123, 167, 0.1);
      --green: #4A8B6E;
      --green-light: rgba(74, 139, 110, 0.1);
      --purple: #6B4E8D;
      --purple-light: rgba(107, 78, 141, 0.1);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-page);
      color: var(--text-primary);
      line-height: 1.5;
      padding: 32px 24px;
      font-size: 14px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    header {
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border-light);
      padding-bottom: 16px;
    }

    header h1 {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    header .subtitle {
      font-size: 13px;
      color: var(--text-muted);
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 16px;
    }

    .card {
      background: var(--bg-card);
      border-radius: 8px;
      padding: 16px;
    }

    .card.full {
      grid-column: 1 / -1;
    }

    .card h2 {
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--accent);
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-light);
    }

    .card h3 {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-primary);
      margin: 12px 0 6px 0;
    }

    .card h3:first-of-type {
      margin-top: 0;
    }

    .card p {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .card ul {
      list-style: none;
      padding: 0;
    }

    .card li {
      font-size: 13px;
      color: var(--text-secondary);
      padding: 3px 0;
      padding-left: 14px;
      position: relative;
    }

    .card li::before {
      content: "•";
      position: absolute;
      left: 0;
      color: var(--text-muted);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    th {
      text-align: left;
      font-weight: 600;
      color: var(--text-primary);
      padding: 6px 8px;
      border-bottom: 1px solid var(--border-light);
      background: #fafafa;
    }

    td {
      padding: 6px 8px;
      border-bottom: 1px solid #f0f0f0;
      color: var(--text-secondary);
    }

    .tag {
      display: inline-block;
      font-size: 10px;
      font-weight: 500;
      padding: 2px 6px;
      border-radius: 3px;
      margin-left: 4px;
    }

    .tag.green {
      background: var(--green-light);
      color: var(--green);
    }

    .tag.yellow {
      background: #FEF3C7;
      color: #92400E;
    }

    .tag.red {
      background: #FEE2E2;
      color: #991B1B;
    }

    .highlight-box {
      background: var(--accent-light);
      border-radius: 6px;
      padding: 12px;
      margin-top: 12px;
    }

    .highlight-box.green {
      background: var(--green-light);
    }

    .highlight-box.purple {
      background: var(--purple-light);
    }

    .highlight-box p {
      margin: 0;
      font-size: 12px;
    }

    .highlight-box strong {
      color: var(--text-primary);
    }

    code {
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 11px;
      background: #f5f5f5;
      padding: 1px 4px;
      border-radius: 3px;
    }

    .flow-diagram {
      background: #fafafa;
      border-radius: 6px;
      padding: 12px;
      font-size: 11px;
      font-family: 'SF Mono', Monaco, monospace;
      color: var(--text-secondary);
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .mini-card {
      background: #fafafa;
      border-radius: 6px;
      padding: 10px;
    }

    .mini-card h4 {
      font-size: 11px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .mini-card p {
      font-size: 11px;
      margin: 0;
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }
      .card {
        box-shadow: none;
        border: 1px solid #e5e5e5;
      }
    }
  </style>
</head>
<body>
  <div class="container">

    <header>
      <h1>Ali Technical Reference</h1>
      <div class="subtitle">Settings & Personalization Pipeline | Quick Reference for Stakeholder Questions</div>
    </header>

    <div class="grid">

      <!-- Scoring Engine -->
      <div class="card">
        <h2>Scoring Engine</h2>

        <h3>Trait Scoring (Q1-30)</h3>
        <p>Weighted Likert scale measuring 4 emotional drivers:</p>
        <table>
          <tr>
            <th>Response</th>
            <th>Weight</th>
          </tr>
          <tr><td>Strongly Disagree</td><td>-1</td></tr>
          <tr><td>Disagree</td><td>-0.5</td></tr>
          <tr><td>Neutral</td><td>0</td></tr>
          <tr><td>Agree</td><td>+1</td></tr>
          <tr><td>Strongly Agree</td><td>+2</td></tr>
        </table>

        <h3>Conflict Style (Q41-70)</h3>
        <p>Thomas-Kilmann model. Binary A/B frequency counting.</p>
        <ul>
          <li>COMPETING, COLLABORATING, COMPROMISING</li>
          <li>AVOIDING, ACCOMMODATING</li>
        </ul>

        <h3>Negotiation Style (Q31-40)</h3>
        <p>Multiple choice → HB, CT, VC, or P classification</p>
      </div>

      <!-- What's Deterministic -->
      <div class="card">
        <h2>Trust & Accuracy</h2>

        <h3>Deterministic (Math, Not AI)</h3>
        <ul>
          <li>Assessment scoring <span class="tag green">verified</span></li>
          <li>Trait percentages <span class="tag green">verified</span></li>
          <li>Persona mapping <span class="tag green">verified</span></li>
          <li>Conflict style assignment <span class="tag green">verified</span></li>
        </ul>

        <h3>AI-Inferred (Claude Generates)</h3>
        <ul>
          <li>Situation classification <span class="tag yellow">guided</span></li>
          <li>Coaching responses <span class="tag yellow">guided</span></li>
          <li>Follow-up questions <span class="tag yellow">guided</span></li>
        </ul>

        <div class="highlight-box green">
          <p><strong>Key point:</strong> Assessment results are pure math. Coaching is AI-generated but personality-informed.</p>
        </div>
      </div>

      <!-- Data Flow -->
      <div class="card full">
        <h2>Data Flow: Settings → AI</h2>
        <div class="flow-diagram">User completes 70-question assessment
        ↓
Scoring engine calculates: Primary Trait (R/Y/B/G) + Conflict Style (5 options) + Negotiation Style (4 options)
        ↓
Persona key generated: e.g., "ASSERTIVE_COMPROMISING" → maps to 1 of 20 profiles
        ↓
User starts chat → System prompt built with personality context
        ↓
Claude API called with: personality-aware prompt + conversation history + user message</div>
      </div>

      <!-- Indexes Used -->
      <div class="card">
        <h2>Indexes & Frameworks</h2>

        <h3>Personality Model</h3>
        <p>4-trait emotional driver framework (DISC-adjacent):</p>
        <ul>
          <li><strong>Red (R)</strong> — Assertive, competitive</li>
          <li><strong>Yellow (Y)</strong> — Sociable, optimistic</li>
          <li><strong>Blue (B)</strong> — Methodical, analytical</li>
          <li><strong>Green (G)</strong> — Empathetic, supportive</li>
        </ul>

        <h3>Conflict Model</h3>
        <p>Thomas-Kilmann Conflict Mode Instrument (TKI)</p>
        <ul>
          <li>Industry-standard since 1974</li>
          <li>5 styles on assertiveness × cooperativeness axes</li>
        </ul>
      </div>

      <!-- V3 Classification -->
      <div class="card">
        <h2>V3 Situation Classification</h2>

        <p>AI extracts 6 signals from user's deal description:</p>
        <table>
          <tr>
            <th>Signal</th>
            <th>Detects</th>
          </tr>
          <tr><td>alternatives</td><td>BATNA strength</td></tr>
          <tr><td>timeline</td><td>Urgency level</td></tr>
          <tr><td>complexity</td><td>Single vs multi-term</td></tr>
          <tr><td>tenure</td><td>Relationship history</td></tr>
          <tr><td>trust</td><td>Relationship quality</td></tr>
          <tr><td>joint_value</td><td>Expansion potential</td></tr>
        </table>

        <h3>Maps to 5 Classifications</h3>
        <ul>
          <li><strong>BATNA_DEFICIENCY</strong> — No alternatives</li>
          <li><strong>BARGAINING</strong> — Commodity, balanced</li>
          <li><strong>TRADING</strong> — Multiple terms</li>
          <li><strong>CREATING</strong> — Trust, value expansion</li>
          <li><strong>PARTNERING</strong> — Strategic long-term</li>
        </ul>
      </div>

      <!-- Input Usage -->
      <div class="card full">
        <h2>Settings Input Status</h2>
        <table>
          <tr>
            <th>Input</th>
            <th>Captured</th>
            <th>Used in AI</th>
            <th>Notes</th>
          </tr>
          <tr>
            <td>First name</td>
            <td><span class="tag green">Yes</span></td>
            <td><span class="tag green">Yes</span></td>
            <td>Used in greeting</td>
          </tr>
          <tr>
            <td>Silhouette assessment</td>
            <td><span class="tag green">Yes</span></td>
            <td><span class="tag green">Yes</span></td>
            <td>Primary driver of coaching style</td>
          </tr>
          <tr>
            <td>Role, seniority, career stage</td>
            <td><span class="tag green">Yes</span></td>
            <td><span class="tag red">No</span></td>
            <td>Ready for future personalization</td>
          </tr>
          <tr>
            <td>Industry, company size/type</td>
            <td><span class="tag green">Yes</span></td>
            <td><span class="tag red">No</span></td>
            <td>Ready for future personalization</td>
          </tr>
          <tr>
            <td>Negotiation counterparty</td>
            <td><span class="tag green">Yes</span></td>
            <td><span class="tag yellow">Partial</span></td>
            <td>Title generation only</td>
          </tr>
          <tr>
            <td>Deal cycle length, region</td>
            <td><span class="tag green">Yes</span></td>
            <td><span class="tag red">No</span></td>
            <td>Ready for future personalization</td>
          </tr>
        </table>

        <div class="highlight-box">
          <p><strong>Design intent:</strong> "Capture now, use later" — infrastructure is ready for richer personalization. MVP focuses on personality-driven coaching.</p>
        </div>
      </div>

      <!-- Quick Answers -->
      <div class="card full">
        <h2>Quick Answers for Common Questions</h2>
        <div class="two-col">
          <div class="mini-card">
            <h4>"What indexes are you using?"</h4>
            <p>Thomas-Kilmann conflict model + 4-trait emotional driver framework (DISC-adjacent). Both are industry-standard psychometric tools.</p>
          </div>
          <div class="mini-card">
            <h4>"How is it calibrated?"</h4>
            <p>Weighted Likert scoring (-1 to +2) with multi-trait attribution. Scores are summed per trait, then normalized to 0-100 for display.</p>
          </div>
          <div class="mini-card">
            <h4>"How can we trust the AI is accurate?"</h4>
            <p>Assessment scoring is deterministic math—not AI inference. Raw responses are stored so we can re-score if algorithms change.</p>
          </div>
          <div class="mini-card">
            <h4>"What about classification accuracy?"</h4>
            <p>V3 uses structured signal extraction with 9 explicit edge-case rules. Not free-form guessing—defined fallback logic for ambiguous situations.</p>
          </div>
        </div>
      </div>

    </div>

  </div>
</body>
</html>
